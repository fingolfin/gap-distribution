# GAP Installer for Windows Installer

This directory contains files needed to build GAP Installer for Windows
using NSIS (http://nsis.sourceforge.net).


To create such installer, first you need to have an NSIS script. An NSIS 
script is a text file with special syntax. NSIS scripts have extension 
"nsi". You can edit such scripts with any text editor. This script needs
update after each GAP release, at it contains information about the version
number, archive timestamp and also about all GAP packages included in the
distribution.



The second stage is to compile the script. The most convenient ways of doing
this to use MakeNSISW - a graphical user interface to NSIS. To compile the 
script, you should do one of the following:

 - Select "Load Script" in the "File" menu

 - Drag the .nsi file into MakeNSISW window

 - Right click on the .nsi file and choose "Compile NSIS Script"


You can also MakeNSIS on the command line with `makensis script.nsi`.

This directory contains the following files:
* `nsiscript.top`
* `nsiscript.bottom`
* `gap.nsi`
* `wininst.g`

The `gap.nsi` script may be updated on any machine. Install there the GAP
release which you would like to wrap into the Windows installer, and read
`wininst.g` using this GAP installation (remember to call GAP with `-r`
option to avoid adding locally installed packages from your `.gap/pkg`
directory). This will produce `nsiscript.mid` file. Now call
```
cat nsiscript.top nsiscript.mid nsiscript.bottom > gap.nsi
```

to concatenate the autogenerated file with the standard header and footer,
and edit the initial section of `gap.nsi` to set up GAP version, archive
timestamp and default installation directory. Commit `gap.nsi` when ready.

To make the GAP installer for Windows:
* unpack GAP source distribution to the subdirectory `gap-4.X.Y` in the same
  directory with this script
* put `gapicon.ico` in the same directory with this script
* put a copy of `etc/CPL` renamed to `copyright.txt` in the same directory 
  with this script
* compile the script
* perform test installation with various components and compare it 
  with the content of source directories


Alexander Konovalov
